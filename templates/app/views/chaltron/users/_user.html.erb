<%= link_to user, class: 'list-group-item list-group-item-action d-flex gap-3 py-3',
                  data: { 'turbo-frame' => '_top' }, id: dom_id(user) do %>
  <div class='d-flex gap-2 w-100 justify-content-between'>
    <%= display_user_avatar user, size: 60, class: 'rounded align-self-center' %>
    <div class='flex-grow-1'>
      <h5 class='mb-0'>
        <%= highlight(user.display_name, params[:search]) %>
        <%= safe_join(user.roles.map do |x|
                        tag.span(t("chaltron/roles.#{x.name}"), class: 'badge bg-primary me-2')
                      end) %>
      </h5>
      <p class='mb-0 opacity-75'>
        <%= highlight(user.username, params[:search]) %>
        <%= tag.span(I18n.t('chaltron.users.it_s_you'), class: 'badge bg-success me-2') if user == current_user %>
        <%= tag.span(t('chaltron.users.user_disabled'), class: 'badge bg-danger me-2') if user.disabled? %>
       </p>
      <p class='mb-0 opacity-75'><%= highlight(user.email, params[:search]) %></p>
    </div>
    <div class='d-flex flex-column'>
      <%= tag.small t('.created_ago', time: time_ago_in_words(user.created_at)),
                    class: 'opacity-50 text-nowrap', title: l(user.created_at),
                    data: {
                      controller: 'chaltron--tooltip',
                      'bs-toggle': 'tooltip', 'bs-placement': 'left'
                    } %>
      <small class='opacity-50 text-nowrap'>
        <span><%= Chaltron::User.human_attribute_name(:sign_in_count) %>: </span>
        <strong><%= user.sign_in_count %></strong>
      </small>
    </div>
  </div>
<% end %>
